# REPORT.md

## Nombre del proyecto

**Pipeline de integraci√≥n continua para API de gesti√≥n de usuarios**

## Repositorio

üîó https://github.com/OmerSolis/Pruebafinalv1

---

## üîß Pasos realizados

### 1. Configuraci√≥n inicial del repositorio

- Se cre√≥ un repositorio Git local.
- Se realiz√≥ un primer commit que incluye: `db.json`, `app.js`, `package.json`, y pruebas (`test/app.test.js`).
- Se cre√≥ un repositorio remoto en GitHub y se conect√≥ correctamente: [Pruebafinalv1](https://github.com/OmerSolis/Pruebafinalv1).

---

### 2. Configuraci√≥n b√°sica de la API

- Se modific√≥ `app.js` para leer directamente los datos desde `db.json`.
- Se implementaron los endpoints:
  - `GET /users` ‚Üí Lista todos los usuarios.
  - `GET /users/:id` ‚Üí Muestra un usuario por ID.
- Se verific√≥ con navegador y `curl` que la API responde correctamente en `localhost:3000`.

---

### 3. Automatizaci√≥n b√°sica con Jenkins

- Se cre√≥ un `Jenkinsfile` con las siguientes etapas:
  1. Clonar el repositorio desde GitHub.
  2. Instalar dependencias (`npm install`).
  3. Iniciar el servidor (`npm start`) en segundo plano.
  4. Esperar unos segundos y hacer una petici√≥n a `/users` usando `curl` para comprobar que la API est√© en funcionamiento.
- El `Jenkinsfile` fue adaptado espec√≠ficamente para funcionar en entorno **Windows**, usando `bat`, `start /B`, `ping` para delays, y `curl`.

---

### 4. Ejecuci√≥n de pruebas automatizadas

- Se integr√≥ la etapa `npm test` al pipeline.
- Se configur√≥ para que el pipeline **falle si alguna prueba no pasa**, cumpliendo con las buenas pr√°cticas de CI.
- Se utilizaron `Jest` y `Supertest` para probar la API.

---

### 5. Reporte y retroalimentaci√≥n

- Se agreg√≥ una etapa final al `Jenkinsfile` que:
  - Ejecuta `npm test` nuevamente y guarda la salida completa (stdout + stderr) en `test-report.txt`.
  - Usa `archiveArtifacts` para almacenar el archivo como artefacto del build.
- Se confirm√≥ que el reporte es accesible desde Jenkins.

---

## üß™ Resultado de pruebas

```bash
PASS  tests/app.test.js
‚úì should return a list of users (XX ms)
‚úì should return a single user (XX ms)

Test Suites: 1 passed, 1 total
Tests:       2 passed, 2 total